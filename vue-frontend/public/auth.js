"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[98],{488:(t,e,o)=>{var a=o(538),s=o(669),n=o.n(s),r=o(382),i=o.n(r);const l={components:{MaskedInput:o(727).Z},data:function(){return{form:{phone:"",code:""},timer:{currentTime:60,timer:null},sentCode:!1,sentCodeRepeat:!1}},computed:{getForm:function(){var t=new FormData;for(var e in this.form)t.append(e,this.form[e]);return t},currentTime:function(){return this.timer.currentTime}},watch:{currentTime:function(t){0===t&&(clearTimeout(this.timer.timer),this.sentCodeRepeat=!0)}},methods:{sendCode:function(){var t=this;this.sentCodeRepeat=!1,this.timer.currentTime=60,this.axios.get(config_apiPath+"/auth/send-code",{params:{phone:this.form.phone}}).then((function(e){204===e.status&&(t.sentCode=!0,t.timer.timer=setInterval((function(){t.timer.currentTime--}),1e3))}))},auth:function(){var t=this;this.form[yii.getCsrfParam()]=yii.getCsrfToken(),this.axios.post(config_apiPath+"/auth",this.getForm).then((function(t){202===t.status&&document.location.reload()})).catch((function(e){422===e.response.status&&"code"===e.response.data[0].field&&t.$refs.authCode.setAttribute("class","error-input")}))}}};const c=(0,o(900).Z)(l,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"modal",attrs:{id:"enterModal",tabindex:"-1",role:"dialog"}},[o("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[o("div",{staticClass:"modal-content"},[o("h4",{staticClass:"modal-title"},[t._v("Вход на сайт")]),t._v(" "),o("form",{staticClass:"modal-form",on:{submit:function(t){t.preventDefault()}}},[o("div",{staticClass:"form-group field-authbyphoneform-phone required"},[o("label",{staticClass:"form-group modal-label modal-input-title",attrs:{for:"auth-phone"}},[t._v("Телефон")]),t._v(" "),o("masked-input",{staticClass:"form-control common-input modal-input",attrs:{id:"auth-phone",mask:"\\+\\7 (111) 111-1111",placeholder:"+7 (912) 345-6789","aria-required":"true",type:"79123456789"},model:{value:t.form.phone,callback:function(e){t.$set(t.form,"phone",e)},expression:"form.phone"}}),t._v(" "),o("div",{staticClass:"help-block"})],1),t._v(" "),t.sentCode?o("div",[o("div",{staticClass:"form-group field-authbyphoneform-code required"},[o("label",{staticClass:"form-group modal-label modal-input-title",attrs:{for:"auth-code"}},[t._v("Код из\n\t\t\t\t\t\t\tсообщения")]),o("span",{staticClass:"modal-input-wrap"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.form.code,expression:"form.code"}],ref:"authCode",attrs:{id:"auth-code",type:"password","aria-required":"true"},domProps:{value:t.form.code},on:{focus:function(e){return t.$refs.authCode.classList.remove("error-input")},input:function(e){e.target.composing||t.$set(t.form,"code",e.target.value)}}}),t._v(" "),t.sentCodeRepeat?o("span",{staticClass:"modal-code-repeat",on:{click:function(e){return t.sendCode()}}},[t._v("Отправить код повторно")]):o("span",{staticClass:"modal-code-repeat modal-code-repeat--disabled"},[t._v("Отправить код через "+t._s(t.timer.currentTime))])])]),t._v(" "),o("button",{staticClass:"common-btn black-btn modal-btn",on:{click:function(e){return t.auth()}}},[t._v("Войти/Зарегистрироваться")])]):o("button",{staticClass:"common-btn black-btn modal-btn",on:{click:function(e){return t.sendCode()}}},[t._v("Отправить код")]),t._v(" "),o("button",{staticClass:"modal-close",attrs:{"data-dismiss":"modal"}},[o("svg",{attrs:{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[o("path",{attrs:{d:"M1 1L7.53333 8L1 15M15 1L8.46667 8L15 15",stroke:"white","stroke-width":"2"}})])])])])])])}),[],!1,null,null,null).exports;a.Z.use(i(),n()),new a.Z({el:"#enterModal",template:"<Auth/>",components:{Auth:c}})}},t=>{t.O(0,[736],(()=>{return e=488,t(t.s=e);var e}));t.O()}]);